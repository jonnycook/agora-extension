// Generated by CoffeeScript 1.7.1
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

define(['View', 'Site', 'Formatter', 'util', 'underscore'], function(View, Site, Formatter, util, _) {
  var AddFeelingView;
  return AddFeelingView = (function(_super) {
    __extends(AddFeelingView, _super);

    function AddFeelingView() {
      return AddFeelingView.__super__.constructor.apply(this, arguments);
    }

    AddFeelingView.nextId = 0;

    AddFeelingView.id = function(args) {
      return ++this.nextId;
    };

    AddFeelingView.prototype.initAsync = function(args, done) {
      return this.resolveObject(args, (function(_this) {
        return function(obj) {
          _this.obj = obj;
          _this.data = util.feelings(_this.ctx, obj);
          return done();
        };
      })(this));
    };

    AddFeelingView.prototype.methods = {
      add: function(view, positive, negative, thought) {
        return this.agora.modelManager.getModel('Feeling').create({
          element_type: this.obj.modelName,
          element_id: this.obj.get('id'),
          thought: thought,
          positive: positive,
          negative: negative,
          timestamp: new Date()
        });
      },
      "delete": function(view, id) {
        return this.agora.modelManager.getInstance('Feeling', id)["delete"]();
      }
    };

    return AddFeelingView;

  })(View);
});

//# sourceMappingURL=AddFeelingView.map
