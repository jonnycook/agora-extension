// Generated by CoffeeScript 1.7.1
define(function() {
  var ProductContainer;
  return ProductContainer = (function() {
    ProductContainer.nextId = 0;

    function ProductContainer(agora, productInfo) {
      var Product;
      this.agora = agora;
      this.productInfo = productInfo;
      this.subscribers = [];
      this.id = ++this.nextId;
      Product = this.agora.modelManager.getModel('Product');
      Product.get(productInfo, (function(_this) {
        return function(product) {
          var subscriber, _i, _len, _ref;
          _this.product = product;
          _ref = _this.subscribers;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            subscriber = _ref[_i];
            subscriber(product);
          }
          return delete _this.subscribers;
        };
      })(this));
    }

    ProductContainer.prototype.withProduct = function(cb) {
      if (this.product) {
        return cb(this.product);
      } else {
        return this.subscribers.push(cb);
      }
    };

    return ProductContainer;

  })();
});

//# sourceMappingURL=ProductContainer.map
