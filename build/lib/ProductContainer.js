// Generated by CoffeeScript 1.10.0
define(function() {
  var ProductContainer;
  return ProductContainer = (function() {
    ProductContainer.nextId = 0;

    function ProductContainer(agora, productInfo1) {
      var Product;
      this.agora = agora;
      this.productInfo = productInfo1;
      this.subscribers = [];
      this.id = ++this.nextId;
      Product = this.agora.modelManager.getModel('Product');
      Product.get(productInfo, (function(_this) {
        return function(product) {
          var i, len, ref, subscriber;
          _this.product = product;
          ref = _this.subscribers;
          for (i = 0, len = ref.length; i < len; i++) {
            subscriber = ref[i];
            subscriber(product);
          }
          return delete _this.subscribers;
        };
      })(this));
    }

    ProductContainer.prototype.withProduct = function(cb) {
      if (this.product) {
        return cb(this.product);
      } else {
        return this.subscribers.push(cb);
      }
    };

    return ProductContainer;

  })();
});

//# sourceMappingURL=ProductContainer.js.map
