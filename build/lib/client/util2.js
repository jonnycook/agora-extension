// Generated by CoffeeScript 1.10.0
define(function() {
  return function() {
    return {
      setRating: function(el, rating, animate) {
        var delay, i, intRating, j, len, ref, speed, starEl;
        if (animate == null) {
          animate = false;
        }
        if (rating === '(error)') {
          ref = el.find('div div');
          for (i = j = 0, len = ref.length; j < len; i = ++j) {
            starEl = ref[i];
            $(starEl).css({
              width: 0
            });
          }
          return el.addClass('error');
        } else {
          el.removeClass('error');
          intRating = parseInt(rating);
          el.find('div div').css({
            width: 0
          });
          speed = 100;
          delay = -10;
          return setTimeout((function() {
            var k, len1, ref1;
            ref1 = el.find('div div');
            for (i = k = 0, len1 = ref1.length; k < len1; i = ++k) {
              starEl = ref1[i];
              if (i < intRating) {
                if (animate) {
                  (function(starEl, i) {
                    return setTimeout((function() {
                      return $(starEl).animate({
                        width: 18
                      }, speed);
                    }), i * (speed + delay));
                  })(starEl, i);
                } else {
                  $(starEl).css({
                    width: 18
                  });
                }
              }
            }
            if (rating - intRating) {
              if (animate) {
                return setTimeout((function() {
                  return el.find("div:nth-child(" + (intRating + 1) + ") div").animate({
                    width: 18 * (rating - intRating)
                  }, speed);
                }), intRating * (speed + delay));
              } else {
                return el.find("div:nth-child(" + (intRating + 1) + ") div").css({
                  width: 18 * (rating - intRating)
                });
              }
            }
          }), animate ? 500 : 0);
        }
      },
      ratingHtml: '<div><div /></div> <div><div /></div> <div><div /></div> <div><div /></div> <div><div /></div>'
    };
  };
});

//# sourceMappingURL=util2.js.map
