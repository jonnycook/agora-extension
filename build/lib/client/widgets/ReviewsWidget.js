// Generated by CoffeeScript 1.7.1
define(function() {
  return function() {
    var ReviewsWidget;
    return ReviewsWidget = (function() {
      ReviewsWidget.prototype.expands = true;

      function ReviewsWidget(data) {
        var review, reviewEl, reviewI, _i, _len, _ref, _ref1, _ref2, _ref3, _ref4;
        this.data = data;
        this.title = (_ref = data.title) != null ? _ref : 'Reviews';
        this.el = $('<ul />');
        _ref1 = data.content;
        for (reviewI = _i = 0, _len = _ref1.length; _i < _len; reviewI = ++_i) {
          review = _ref1[reviewI];
          if ((_ref2 = reviewI === data.count) != null ? _ref2 : 3) {
            break;
          }
          reviewEl = $("<li class='review'> <div class='wrapper'> <a href='" + review.url + "' target='_blank' class='title'>" + ((_ref3 = review.title) != null ? _ref3 : '') + "</a> <div class='rating'> <div><div /></div> <div><div /></div> <div><div /></div> <div><div /></div> <div><div /></div> </div> <div class='author'>" + review.author + "</div> </div> <div class='review'>" + ((_ref4 = review.review) != null ? _ref4 : review.content) + "</div> </div>");
          if (!review.review) {
            reviewEl.find('div.review').remove();
          } else if (data.maxHeight) {
            reviewEl.find('div.review').css('maxHeight', data.maxHeight);
          }
          if (!review.url) {
            reviewEl.find('.title').removeAttr('href');
          }
          util2.setRating(reviewEl.find('.rating'), review.rating);
          this.el.append(reviewEl);
        }
      }

      ReviewsWidget.prototype.init = function() {
        if (this.data.maxHeight) {
          return this.el.find('div.review').dotdotdot();
        }
      };

      return ReviewsWidget;

    })();
  };
});

//# sourceMappingURL=ReviewsWidget.map
