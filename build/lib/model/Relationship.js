// Generated by CoffeeScript 1.10.0
var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

define(['./ObservableObject'], function(ObservableObject) {
  var Relationship;
  return Relationship = (function(superClass) {
    extend(Relationship, superClass);

    function Relationship() {
      return Relationship.__super__.constructor.apply(this, arguments);
    }

    Relationship.prototype.observeObject = function(object, observer) {
      var _observer;
      object.observe((_observer = (function(_this) {
        return function(mutation) {
          if (_this._instance.model.manager.relationshipsPaused) {
            return _this._instance.model.manager.mutations.push({
              observer: observer,
              mutation: mutation
            });
          } else {
            return observer(mutation);
          }
        };
      })(this)), this);
      if (this.observedObjects == null) {
        this.observedObjects = [];
      }
      return this.observedObjects.push({
        object: object,
        observer: _observer
      });
    };

    Relationship.prototype.stopObservingObjects = function() {
      var i, len, object, observer, ref, ref1;
      if (this.observedObjects) {
        ref = this.observedObjects;
        for (i = 0, len = ref.length; i < len; i++) {
          ref1 = ref[i], observer = ref1.observer, object = ref1.object;
          object.stopObserving(observer);
        }
        return delete this.observedObjects;
      }
    };

    Relationship.prototype.destruct = function() {
      this.stopObservingObjects();
      return typeof this.onDestruct === "function" ? this.onDestruct() : void 0;
    };

    return Relationship;

  })(ObservableObject);
});

//# sourceMappingURL=Relationship.js.map
