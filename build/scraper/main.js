// Generated by CoffeeScript 1.7.1
var page, webserver;

page = require('webpage').create();

webserver = require('webserver').create();

webserver.listen(3002, function(request, response) {
  var name, params, part, queryString, queryStringParts, value, _i, _len, _ref;
  queryString = request.url.match(/^\/[^?]*(?:\?(.*))?$/)[1];
  queryStringParts = queryString.split('&');
  params = {};
  for (_i = 0, _len = queryStringParts.length; _i < _len; _i++) {
    part = queryStringParts[_i];
    _ref = part.split('='), name = _ref[0], value = _ref[1];
    params[name] = unescape(value);
  }
  console.log(JSON.stringify(params.products));
  page.evaluate((function(cb, products) {
    return scrapeProducts(cb, products);
  }), params.cb, JSON.parse(params.products));
  return response.closeGracefully();
});

page.onConsoleMessage = function(msg) {
  return console.log(msg);
};

page.open('file:///Users/jonny/Desktop/agora-dev/Agora-chrome/scraper/scraper.html', function(status) {
  return console.log(status);
});

//# sourceMappingURL=main.map
