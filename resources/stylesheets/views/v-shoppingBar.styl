$toolBarWidth = 106px
$distance = 0
$marginTop = (64px - 48px)/2px

.-agora-dev div.-agora.v-shoppingBar > .devAction
	display block

div.-agora.v-shoppingBar
	height 64px
	position fixed
	z-index $bottomBarZ
	bottom 0
	left 0
	width 100%
	background white
	background-clip content-box

	border-top 2px solid rgba(0, 0, 0, .1)

	// dev
	> .devAction
		position absolute
		right 0
		top 0
		display none

		width 20px
		height 100%

		.reloadDevAction
			display block
			height 10px
			background-color black
			cursor pointer

		.devAction
			display block
			height 10px
			background-color blue
			cursor pointer

		.reloadStyles
			display block
			height 10px
			background-color green
			cursor pointer

	// status
	&.down-status
		.actions, .contentWrapper
			display none

		.message
			vertical-align: middle;
			height: 100%;
			display: block;
			text-align: center;
			line-height: 66px;

	&:not(.down-status)
		.message
			display none
	
	// reload
	&.reload
		:not(.needsReload)
			display none
			
		.needsReload
			vertical-align: middle;
			height: 100%;
			display: block;
			text-align: center;
			line-height: 66px;
			color $orange

	.needsReload
		display none

	// sign in/sign out
	&.signedOut
		// line-height @height
		// text-align center
		:not(.signIn):not(.needsReload)
			display none

	&.signedIn
		.signIn
			display none

	.signIn
		vertical-align: middle;
		height: 100%;
		display: block;
		text-align: center;
		line-height: 66px;
		color $orange

	// hiding
	&.hidden
		display block

		&:not(.dragging)
			overflow hidden
			height 0

	// belt actions/menus
	.actions
		position relative
		float left
		padding 0 11px 0

		.count
			&:not(.nonzero)
				display none
			position absolute
			top 7px
			right 12px
			background-color $orange
			width 18px
			height 18px
			border-radius 9px
			color white
			text-align center
			line-height @height
			z-index 1

		a
			display block
			width 48px
			height 48px
			float left
			background-repeat no-repeat
			background-position center
			text-indent -99999px
			margin-top $marginTop

		.moveUp
			// image $base + 'upLightGray.png' 31px 23px
			image $base + 'views/ShoppingBar/backArrow.png' 15px 22px
			&:hover
				hover-style()
				// image $base + 'views/ShoppingBar/upHover.png' 31px 23px

		.home
			// image $base + 'homeLightGray.png' 28px 22px
			&:hover
				hover-style()

			image $base + 'views/ShoppingBar/menu.png' 28px 22px
			cusror default

	// &.collections
	// 	.collectionsToggle
	// 		image $base + 'icons/list.png' 28px 30px

	// 	.contentWrapper
	// 		background-color #D9D9D9
	// 		margin 0

	// 		.content > .element:not(.session), > .add
	// 			margin-top 8px

	// .collectionsToggle
	// 	position absolute
	// 	width 48px
	// 	height 48px
	// 	display block
	// 	image $base + 'views/ShoppingBar/collectionsInactive.png' 28px 30px
	// 	background-repeat no-repeat
	// 	background-position center
	// 	right 9px
	// 	top 8px
	// 	margin-left 5px

	// .collectionsArrow
	// 	display block
	// 	position absolute
	// 	height 15px
	// 	width 6px
	// 	image $base + 'views/ShoppingBar/collectionsArrow.png' 6px 15px
	// 	top 50%
	// 	margin-top -7px


	// What's this for?
	// .element.compositeSlot .element
	// 	margin-top 0


	&:not(.shared) .right .collaborate
		display none

	// error
	.errorState
		position: absolute;
		right: 72px;
		top: 15px;
		font-size: 29px;
		color: #C46666;
		font-weight: bold	
		cursor default

	> .right
		position absolute
		right 0
		top 0
		padding 18px 19px 0 10px

		> *
			display block
			float left
			margin-right 15px

		// bagsby chat
		.bagsby
			cursor pointer
			image $base + 'bagsbyAsleep.png' 41px 24px
			font-size: 29px;
			&.online
				image $base + 'bagsbyAwake.png' 41px 24px
			&.newMessages
				image $base + 'bagsbyTalking.png' 41px 24px
			color $darkGray
			font-weight: bold	
			width 41px
			height 24px

		.priceWatch
			cursor pointer
			width 30px
			height 30px
			image $base + 'watchDarkGray.png' 30px 30px
			margin-top -2px


		.collaborate
			cursor pointer
			width 22px
			height 26px
			image $base + 'collaborate/collaborateDarkGray.png' 22px 26px

	
	// content
	.contentWrapper
		position absolute
		margin -2px 0 0 -4px
		height 66px
		overflow auto

	.content
		position absolute
		top 0
		height 48px
		margin 0 4px

		.element
			position absolute

			&.createBundle
				border-right 58px solid transparent
				// height 56px

				.addDrop
					right -58px

				// &.activeDrop:before
				// 	display none

				> .fakeGrip
					z-index 1
					position absolute
					bottom -(56px - 48px)
					left 0
					right -58px
					height 14px
					border-bottom 4px solid rgba(0, 0, 0, .15)


		> .element:not(.session), > .add
			margin-top 10px

		&.activeDrop
			outline 1px solid blue
			background-color blue

		.addDrop
			position absolute
			right 0
			padding-left 10px
			top 0
			width 48px
			height 48px
			image $base + 'views/ShoppingBar/add.png' 18px 18px
			background-position center
			background-repeat no-repeat

			&.activeDrop
				image $base + 'views/ShoppingBar/add(inverted).png' 48px 48px

		// .activeDrop > .addDrop
		// 		position:absolute; right:0; top: 0; width: 40px; height: 48px;
		// 		background: center url($base + "add.png") rgba(255, 255, 255, .3)

		// > .add
		// 	position absolute
		// 	top 0
		// 	width 48px
		// 	height 48px
		// 	image $base + 'plusLightGray.png' 18px 18px
		// 	background-position center
		// 	background-repeat no-repeat
		// 	cursor pointer

		// 	&:hover
		// 		image $base + 'plusDarkGray.png' 18px 18px

		// 	&.activeDrop
		// 		image $base + 'plusWhite.png' 18px 18px
		// 		background-color $darkGray
		// 		border-radius 2px

.-agora
	// bar items
	.barItem.element .element
		position absolute

	.compositeslot, .product, .composite
		width 48px

	@require 'shoppingBar/element'

	@require 'shoppingBar/list'
	@require 'shoppingBar/session'
	@require 'shoppingBar/bundle'
	@require 'shoppingBar/decision'
	@require 'shoppingBar/product'

	.barItem.element.unauthorized
		&:after
			content ''
			position absolute
			width 100%
			height 100%
			image $base + 'unauthorized.png' 24px 24px
			background-repeat no-repeat
			background-position center
		&.Decision
			image $base + 'icons/listDarkGray.png' 38px 38px
			background-position center
			background-repeat no-repeat
		

	.barItem.sharedbelt
		.preview
			background-color white
			left 2px
			top 2px
			bottom 2px
			right 2px
			mosaic()
			position absolute

	.barItem.belt
		cursor pointer
		&.empty
			.preview, .icon, .count
				display none

			image $base + 'icons/beltDarkGray.png' 38px 38px
			background-repeat no-repeat
			background-position center

		.preview
			background-color white
			left 2px
			top 2px
			bottom 2px
			right 2px
			mosaic()
			position absolute

		&:not(:hover) .count
			display none

		.count
			z-index 1
			text-align center
			line-height 26px
			font-weight bold
			cursor pointer

		.icon
			image $base + 'icons/beltDarkGray.png'
			background-repeat no-repeat

		.icon, .count
			width 26px
			height 26px
			position absolute
			left 50%
			top 50%
			margin-left -(@width/2)
			margin-top -(@height/2)
			background-size 14px
			background-position center
			background-color white
			border-radius 13px
			overflow hidden


	// menu
	@require 'shoppingBar/menu'

	// rename session
	.renameSession .content
		input[type=text]
			width 100%
			margin-bottom 11px

		.button
			height 31px
			min-width 81px
			font-size 12px
			text-align center
			border-radius 2px

			&:hover
				box-shadow 0px 0px 0px 2px rgba(0, 0, 0, 0.10)

			&[type=submit]
				background-color #696969
				color white


			& + .button
				margin-left 3px